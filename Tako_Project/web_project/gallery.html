<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gallery</title>
  <link rel="stylesheet" href="gallery.css">
  <link rel="stylesheet" href="nav.css">
  <link rel="stylesheet" href="menu.css">
</head>

<body>
<section id="Home">

  <div class="cart-panel">
    <div class="cart-header">
        <h2>Shopping Cart</h2>
        <button class="close-cart">X</button>
    </div>
    <ul class="cart-items">
        <li class="empty">Your cart is empty</li>
    </ul>
    <div class="cart-total">
        <strong>Total:</strong> <span class="total-price">P0.00</span>
    </div>
    <button class="checkout-button">CHECK OUT</button>
</div>

<nav>

<div class="logo">
<img src="takologo.jpg">
</div>

<ul>
<li><a href="home.html">Home</a></li>
<li><a href="about.html">About</a></li>
<li><a href="menu.html">Menu</a></li>
<li><a href="gallery.html">Gallery</a></li>
<li><a href="order.html">Order</a></li>
<li><a href="cart.html">ðŸ›’</a></li>
</ul>

<div class="icon">
<i class="fa-solid fa-magnifying-glass"></i>
<i class="fa-solid fa-heart"></i>
<i class="fa-solid fa-cart-shopping"></i>
</div>

</nav>

  <div class="gallery" id="Gallery">

<h1>Our<span>Gallery</span></h1>

<div class="gallery_image_box">
<div class="gallery_image">
<img src="cainta.jpg">

<h3>Cainta Branch</h3>
<p>
Tako10 is just around your corner!
Visit one of our branch in cainta at
384 A. Rodriguez St. Cainta, Rizal (parola) 
</p>
</div>

<div class="gallery_image">
<img src="taytay.jpg">

<h3>Taytay Branch</h3>
<p>
  Tako10 is just around your corner!
  Visit one of our branch in Taytay-bayan! 
</p>
</div>

<div class="gallery_image">
<img src="binangonan.jpg">

<h3>Binangonan </h3>
<p>
  Tako10 is just around your corner!
  Visit one of our branch in Pantok-Binangonan! 
</p>
</div>

</div>

 </div>

 <script>
  function addToCart(itemName, price, image) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      let existingItem = cart.find(item => item.name === itemName);

      if (existingItem) {
          existingItem.quantity++;
      } else {
          cart.push({
              name: itemName,
              price: parseFloat(price),
              image: 'images/' + image, 
              quantity: 1
          });
      }

      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartDisplay();
  }

  function updateCartDisplay() {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      let cartItems = document.querySelector('.cart-items');
      cartItems.innerHTML = '';

      if (cart.length === 0) {
          cartItems.innerHTML = '<li class="empty">Your cart is empty</li>';
      } else {
          cart.forEach((item, index) => {
              let li = document.createElement('li');
              let quantity = item.quantity || 1;
              let totalPrice = (item.price * quantity).toFixed(2);

              li.innerHTML = `
                  <img src="${item.image}" alt="${item.name}">
                  <span>${item.name}</span>
                  <div>
                      <button class="quantity-btn minus" data-index="${index}">-</button>
                      <span>${quantity}</span>
                      <button class="quantity-btn plus" data-index="${index}">+</button>
                  </div>
                  <span>P${totalPrice}</span>
                  <button class="remove-btn" data-index="${index}">Remove</button>
              `;
              cartItems.appendChild(li);
          });
      }
      calculateTotal();
  }

  function calculateTotal() {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      let total = cart.reduce((sum, item) => {
          return sum + (item.price * item.quantity);
      }, 0);
      document.querySelector('.total-price').textContent = `P${total.toFixed(2)}`;
  }

  function removeItem(index) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartDisplay();
  }

  function changeQuantity(index, change) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      if (cart[index].quantity + change > 0) {
          cart[index].quantity += change;
          localStorage.setItem('cart', JSON.stringify(cart));
          updateCartDisplay();
      }
  }

  document.querySelector('nav ul li a[href="cart.html"]').addEventListener('click', function(event) {
      event.preventDefault();
      document.querySelector('.cart-panel').classList.add('show');
      updateCartDisplay();
  });

  document.querySelector('.close-cart').addEventListener('click', () => {
      document.querySelector('.cart-panel').classList.remove('show');
  });

  document.addEventListener('click', function(event) {
      if (event.target.classList.contains('remove-btn')) {
          let index = event.target.dataset.index;
          removeItem(index);
      } else if (event.target.classList.contains('plus')) {
          let index = event.target.dataset.index;
          changeQuantity(index, 1);
      } else if (event.target.classList.contains('minus')) {
          let index = event.target.dataset.index;
          changeQuantity(index, -1);
      }
  });

  document.getElementById('checkoutButton').addEventListener('click', function() {
      window.location.href = 'order.html'; 
  });
</script>

</body>

</html>